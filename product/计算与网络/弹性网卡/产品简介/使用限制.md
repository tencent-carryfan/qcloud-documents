网络访问控制列表（Access Control List，ACL）是一种子网级别的可选安全层，用于控制进出子网的数据流，可以精确到协议和端口粒度。
![](https://main.qcloudimg.com/raw/07848376d9e86f474b2090b2ec695386.png)

## 使用场景
您可以为具有相同网络流量控制的子网关联同一个网络 ACL，通过设置出站和入站规则，对进出子网的流量进行精确控制。
例如，您在腾讯云私有网络内托管多层 Web 应用，创建了不同子网分别部署 Web 层、逻辑层和数据层服务，通过网络 ACL，您可以控制这三个子网之间的访问，使得：Web 层子网和数据层子网无法相互访问，只有逻辑层可以访问 Web 层和数据层子网。

## ACL 规则
当您在网络 ACL 中添加或删除规则后，会自动应用到与其相关联的子网的网络流量控制。
网络 ACL 规则包括以下几个组成部分：
- 协议类型，如 TCP、UDP、HTTP 等。
- 目的端口，支持单个端口、端口范围。
- 源数据（入站）或目标数据（出站）的 IP ，支持单个 IP 和 IP 范围（以 CIDR 表示）。
- 策略：允许或拒绝。

### 默认规则
每个网络 ACL 在创建后都将包含两条默认规则，默认规则无法修改或删除，且优先级最低。
- 入方向默认规则
<table>
<thead>
<tr>
<th>协议类型</th>
<th>端口</th>
<th>源 IP</th>
<th>策略</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL</td>
<td>ALL</td>
<td>0.0.0.0/0</td>
<td>拒绝</td>
<td>拒绝所有入站流量</td>
</tr>
</tbody></table>

- 出方向默认规则
<table>
<thead>
<tr>
<th>协议类型</th>
<th>端口</th>
<th>源 IP</th>
<th>策略</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL</td>
<td>ALL</td>
<td>0.0.0.0/0</td>
<td>拒绝</td>
<td>拒绝所有出站流量</td>
</tr>
</tbody></table>

### 规则优先级
- 网络 ACL 规则的优先级通过**规则在列表中的位置**来表示，列表顶端的规则优先级最高，最先应用；列表底端的规则优先级最低。
- 若有规则冲突，则默认应用**位置更前**的规则。
- 当有流量入/出绑定有网络 ACL 的子网时，将从网络 ACL 列表顶端的规则开始逐条匹配至最后一条。如果匹配某一条规则成功，允许通过，则不再匹配该规则之后的规则。

#### 应用示例
场景：允许所有源 IP 对 ACL 关联子网内云服务器所有端口进行访问，同时唯一拒绝源 IP 为`192.168.200.11/24 `的机器 HTTP 访问80端口，可按如下方式设置：

| 协议类型 | 端口 | 源 IP | 策略 |说明| 
| --- | --- | --- | --- |---|
| HTTP | 80 |192.168.200.11/24 |拒绝 |拒绝该 IP 机器的 HTTP 访问80端口 |
| ALL | ALL |0.0.0.0/0 |允许 |允许所有源 IP 访问所有端口|


## 安全组与网络 ACL 的区别
| 对比项 | 安全组 |网络 ACL|
| --- | --- | --- |
|流量控制| 云服务器、数据库等实例级别的流量控制 | 子网级别的流量控制 |
| 规则 | 支持允许规则、拒绝规则 | 支持允许规则、拒绝规则 |
| 有无状态 | 有状态：返回数据流会被自动允许，不受任何规则的影响 | 无状态：返回数据流必须被规则明确允许 |
| 生效时间 | 创建云服务器的同时指定安全组，或稍后将安全组与实例关联，实例关联安全组后规则生效 | 创建 ACL 并绑定子网后，ACL 将自动应用到关联子网内的所有云服务器实例 |
| 规则优先级 |有规则冲突时，默认应用位置更前的规则 | 有规则冲突时，默认应用位置更前的规则 |

